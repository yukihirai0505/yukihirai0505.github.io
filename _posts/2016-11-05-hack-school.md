---
layout: post
title:  "ハッカーの学校 解説編で出てきた用語一部抜粋"
date:   2016-11-05 12:00:00 +0900
categories: Development
---

本日はハッカーの学校を読んでみたので、
簡単に自分の中で整理したいと思います。

まずは基本的な用語の整理

- プライベートIP...LAN内で割り当てるためのIP
- グローバルアドレスIP...インターネット場で唯一割り当てられるIP
- ループバックアドレス...自分自身を示す仮想的なアドレス(通常:127.0.0.1 localhost)
- ブロードキャストアドレス...当該ネットワークに所属するホスト全体 ホスト部を全部1にしたアドレス(192.168.1.0のホストアドレスが下位8ビットの場合はブロードキャストアドレスは192.168.1.255)
- CIDR...クラスレスアドレッシング、ネットワークアドレスを任意の長さに設定できる仕組み

ネットワークアドレスとホストアドレスについて

=> [ネットワークアドレスとホストアドレス](http://www.itbook.info/study/p54.html)

- サブネットマスク...IPアドレスの先頭から何ビットをネットワークアドレスに使用するかを定義する32ビットの数値

例えばサブネットマスクが2進数で「11111111 11111111 11111111 00000000」(10進数で「255.255.255.0」)なら
上位24ビットがネットワークアドレス、下位8ビットがホストアドレスになる。
これをネットワークアドレスとともに「198.168.10.0/24」と表記したり、単に「/24」のように表記する。
後者の表記方はCIDR記法と呼ぶ。

## ネットワーク管理でMACアドレスを管理する理由

MACアドレスのOUIからベンダーを調べて、機器を特定すれば
ネットワーク管理部が把握していないネットワーク機器を勝手に使用していないかどうか確認できる。
勝手にLAN内に個人のPCを接続されては困るのでMACアドレスフィルタリングで登録したMACアドレスをもつ端末以外からの接続を拒否する。

## TCP/IP通信でIPアドレスとMACアドレスが必要な理由

MACアドレスはネットワークの概念を持っていない。
IPアドレスだけの使用ではデータリンク層でアドレスの割り当てをまったく行わないということになるため、
OSが物理ネットワークを流れるすべての通信について自分宛てかどうかを判断することになり、
負荷が高くなる。

## アドレス解決

TCP/IPで通信するためにはIPアドレスとMACアドレスがあれば良い。
ドメイン名がわかればそこからIPアドレスはDNSで判別できるので、
IPアドレスからMACアドレスを導く仕組みがあれば良い。

アドレス解決はIPアドレス、MACアドレスどちらか一方からもう一方を導くこと。
ただ、一般的には上記の事情からMACアドレスからIPアドレスを導くことを指す。

方法としては以下の3つに大別できる。

- テーブルルックアップ
- プロトコルアドレスから物理アドレスを算出
- メッセージ交換

## ネットワーク場における通信のやりとり

- TCP...長いデータを分割してやりとり、分割したものを受け取った側で元に戻す データを運ぶ途中でエラーが起きてもそれを修復したり再送
したりする
- UDP...エラーの回復機能をもたない簡便なプロトコル そのため通信の処理を行うプロセッサの負担が軽く、ネットワークを流れるデータ量が少ないため動作が早くなる。


## UDPクライアントの動作

- 名前解決...サーバー名からIP取得
- ソケットオ・ブジェクトの作成...OSは通信状態を管理するテーブルをもちその1レコードが1ソケットに対応する(通信しているプログラム名やプロトコルの種類、通信状態など)
- データの送信...送信内容のチェック、経路探索、ARPを用いてMACアドレスの割り出し、パケットの作成/送信
- レスポンスデータの受信

ざっくりな流れはTCPも同じだがその内容は異なる。

- [TCPとUDPの比較](http://gihyo.jp/admin/serial/01/net_prac_tech/0007)
- [ARP(Address Resolution Protocol)、RARP(Reverse ARP)]とは](http://www.infraexpert.com/study/tcpip2.html)


## NIC

NIC...Network Internet Card はデジタルデータを電気信号に変えて送出したり、その逆に電気信号をデジタルデータに変換してコンピュータに取り込んだりするためのカードです。
NICはLANの接続に利用するため、LANカードとも呼ばれる。

## OSI参照モデル

- [OSI参照モデル](http://miyata.gotdns.com/net/OSI..htm)
- [OSI参照モデルとネットワーク機器](http://old.active-sita.com/32_benkyo/ren_01_pc-net-2/pc-net-2.html)

## ICMP

ICMP...ネットワーク上の接続機器の状態を伝えるための通信プロトコル
IPパケットのエラー通知やIPネットワークの状態などを確認するIPネットワークの診断用として使用される。

[主なICMPメッセージ](http://blog.negabaro.com/4903.html)

## DNS名前空間

DNSは名前をツリー構造で管理する。
ノードには名前が割り当てられ、ツリー構造全体をDNS名前空間(ドメイン名空間)と呼ぶ。
ドメイン名空間の部分木がドメインになる。
DNS名前空間の木の深さは最大で127まで許されている。

ルートの直下のドメインは ***TLD(Top Level Domain)*** と呼ばれる。

## リソースレコード

ドメインは、ドメインに関連づけられたリソースレコード(資源レコード)の集合をもつ。

代表的なもの


| タイプ | 値 | 意味  |
| ------ | ------ | ------ |
|  A  |  1  |   ホストのIPアドレス  |
|  NS  |  2  |   ゾーンに権威を持つネームサーバー(DNSサーバー)  |
|  CNAME  |  5  |  押すとの別名に対応するドメインの正式名  |
|  SOA  |  6  |  ゾーン内の権限の起点  |
|  WKS  |  11 |  ウェルノウンサービス  |
|  PTR  |  12  | IPアドレスの逆引き用のポインタ   |
|  HINFO  |  13  |  ホストに関する追加情報(CPUとOSのタイプ)  |
|  MINFO  |  14  |  メーリングリストを担当するメールボックス  |
|  MX  |  15  |  メールサーバー(Mail Exchange)  |
|  TXT  | 16   |  DNSが解釈しない単なるASCII文字列  |
|  SIG  | 24   |  セキュリティの署名  |
|  KEY  | 25   |  セキュリティの鍵  |
|  GPOST  |  27  |  地理的な位置  |
|  AAAA  |  28  |  ホストのIPアドレス(IPv6)  |
|  NXT  |  30  |  次のドメイン  |
|  SRV  |  33  |  サーバーの選択  |
|  *  |  255  |  すべてのレコードの選択  |



